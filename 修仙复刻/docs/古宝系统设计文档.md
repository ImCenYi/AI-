# 大千宝录古宝系统设计文档

## 一、系统概述

**大千宝录**是游戏中的核心收集养成系统，玩家通过收集各界域的古宝，获得全方位的属性加成。

### 核心数据
- **6大界域**：凡界、灵界、仙界、神界、圣界、道界
- **150个古宝**：每界域25个，按品质金字塔分布
- **9种属性**：覆盖战斗、资源、装备、种田等所有系统
- **9大羁绊**：按属性自动归类，激活获得额外加成

---

## 二、古宝品质分布

### 单界域配置（25个）
| 品质 | 数量 | 占比 | 定位 |
|------|------|------|------|
| UR | 2个 | 8% | 至尊神器，属性极致 |
| SSR | 4个 | 16% | 传说级，强力加成 |
| SR | 6个 | 24% | 稀有灵物，中坚力量 |
| R | 13个 | 52% | 基础法器，数量众多 |

### 总计（6界域 × 25 = 150个）
```
UR: 12个    ████ 8%
SSR: 24个   ████████ 16%
SR: 36个    ████████████ 24%
R: 78个     ████████████████████████████████ 52%
```

---

## 三、属性类型详解（9种）

### 1. 全属性加成 (ALL_STAT_MULT)
- **效果**：攻击力 + 生命值同时加成
- **适用**：通用型玩家，均衡发展
- **成长率**：
  - UR: ×1.15/级
  - SSR: ×1.10/级
  - SR: ×1.06/级
  - R: ×1.03/级

### 2. 攻击力加成 (ATTACK_MULT)
- **效果**：仅攻击力倍率提升
- **适用**：速攻流、暴力输出
- **成长率**：UR ×1.20, SSR ×1.15, SR ×1.08, R ×1.05

### 3. 生命值加成 (HP_MULT)
- **效果**：仅生命值倍率提升
- **适用**：坦克流、持久生存
- **成长率**：UR ×1.20, SSR ×1.15, SR ×1.08, R ×1.05

### 4. 爬塔真意掉落 (TOWER_DROP)
- **效果**：通天塔法则真意掉落数量提升
- **适用**：冲塔玩家，追求境界突破
- **成长率**：UR ×1.25, SSR ×1.18, SR ×1.10, R ×1.05

### 5. 刷丹效率 (PILL_EFFICIENCY)
- **效果**：主线刷丹获得的属性倍率提升
- **适用**：挂机党、丹药流
- **成长率**：UR ×1.20, SSR ×1.15, SR ×1.08, R ×1.04

### 6. 装备等级 (EQUIP_LEVEL)
- **效果**：主线战斗掉落的装备等级提升
- **适用**：装备党、战力追求者
- **成长率**：UR +3级, SSR +2级, SR +1级, R +0.5级
- **计算方式**：加算（非乘算）

### 7. 神器等级 (TREASURE_LEVEL)
- **效果**：副本掉落的秘宝等级提升
- **适用**：副本狂魔、秘宝收集者
- **成长率**：UR +3级, SSR +2级, SR +1级, R +0.5级
- **计算方式**：加算

### 8. 全属性指数 (ALL_EXP_BONUS) ⭐极稀有
- **效果**：攻击力和生命值的指数部分百分比提升
- **示例**：1e100 → 1e100.5（+0.5%指数）
- **适用**：大后期、指数流玩家
- **成长率**：UR +0.5%, SSR +0.3%, SR +0.1%, R +0.05%
- **特点**：越后期越强，稀缺属性

### 9. 生灵精华 (LIFE_ESSENCE)
- **效果**：百草灵园收获时精华数量提升
- **适用**：种田党、炼体玩家
- **成长率**：UR ×1.30, SSR ×1.20, SR ×1.12, R ×1.06

---

## 四、升级系统

### 等级结构
- 每重10级，可无限升重
- 满10级自动升重，重数+1，等级归零

### 升级消耗（碎片）
| 品质 | 1-10级消耗 | 升重总计 |
|------|-----------|----------|
| UR | [3,3,4,4,5,5,6,6,7,10] | 53碎片 |
| SSR | [2,2,2,3,3,4,4,5,5,6] | 36碎片 |
| SR | [1,1,2,2,2,3,3,3,4,4] | 25碎片 |
| R | [1,1,1,1,2,2,2,2,2,3] | 17碎片 |

### 重数惩罚
每升一重，消耗 ×1.5
- 例：UR第1重最后1级需10碎片，第2重最后1级需15碎片

---

## 五、羁绊系统（9大羁绊）

### 羁绊与属性对应
| 羁绊ID | 名称 | 绑定属性 | 激活条件 |
|--------|------|---------|---------|
| warrior_path | 战狂之道 | ATTACK_MULT | 激活3/6/9个攻击古宝 |
| immortal_body | 不朽之身 | HP_MULT | 激活3/6/9个生命古宝 |
| master_of_all | 万法皆通 | ALL_STAT_MULT | 激活3/6/9个全属性古宝 |
| tower_master | 通天塔主 | TOWER_DROP | 激活3/5个爬塔古宝 |
| pill_master | 丹道宗师 | PILL_EFFICIENCY | 激活3/5个刷丹古宝 |
| equipment_master | 神匠 | EQUIP_LEVEL | 激活3/5个装备古宝 |
| treasure_master | 寻宝者 | TREASURE_LEVEL | 激活3/5个神器古宝 |
| life_master | 灵植师 | LIFE_ESSENCE | 激活3/5个种田古宝 |
| transcendent | 超脱者 | ALL_EXP_BONUS | 激活2/4个指数古宝 |

### 羁绊效果

#### 战狂之道（攻击）
- Lv1: 收集3个 → 攻击力 ×1.20
- Lv2: 收集6个 → 攻击力 ×1.35
- Lv3: 收集9个 → 攻击力 ×1.50

#### 不朽之身（生命）
- Lv1: 3个 → 生命值 ×1.20
- Lv2: 6个 → 生命值 ×1.35
- Lv3: 9个 → 生命值 ×1.50

#### 万法皆通（全属性）
- Lv1: 3个 → 全属性 ×1.12
- Lv2: 6个 → 全属性 ×1.25
- Lv3: 9个 → 全属性 ×1.40

#### 通天塔主（爬塔）
- Lv1: 3个 → 爬塔掉落 ×1.30
- Lv2: 5个 → 爬塔掉落 ×1.60

#### 丹道宗师（刷丹）
- Lv1: 3个 → 刷丹效率 ×1.25
- Lv2: 5个 → 刷丹效率 ×1.50

#### 神匠（装备）
- Lv1: 3个 → 装备等级 +5
- Lv2: 5个 → 装备等级 +12

#### 寻宝者（神器）
- Lv1: 3个 → 神器等级 +5
- Lv2: 5个 → 神器等级 +12

#### 灵植师（种田）
- Lv1: 3个 → 精华掉落 ×1.30
- Lv2: 5个 → 精华掉落 ×1.70

#### 超脱者（指数）⭐
- Lv1: 2个 → 全属性指数 +1%
- Lv2: 4个 → 全属性指数 +2.5%

---

## 六、寻宝系统

### 寻宝令获取（设计值）
| 来源 | 每日产出 | 说明 |
|------|---------|------|
| 每日签到 | 5个 | 基础保障 |
| 在线时长 | 10个 | 每小时2个，上限5小时 |
| 荒野挂机 | ~12个 | 每50层难度掉落1个 |
| 通天塔 | ~8个 | 每10层掉落1个 |
| 副本通关 | ~5个 | 根据副本层级 |
| **合计** | **~40个/天** | - |

### 抽取概率
| 品质 | 概率 | 保底 |
|------|------|------|
| UR | 3% | 35抽保底 |
| SSR | 10% | - |
| SR | 25% | - |
| R | 62% | - |

### 保底机制
- **UR保底**：35抽内必出UR
- **单界域抽取**：每个界域独立卡池

---

## 七、数值计算公式

### 基础加成
```
单个古宝倍率 = baseValue ^ (重数 × 10 + 等级)

例：UR攻击古宝（×1.20/级），5重8级
倍率 = 1.20 ^ (5×10 + 8) = 1.20 ^ 58 ≈ ×229,349
```

### 同类叠加（乘算）
```
攻击总倍率 = 古宝1倍率 × 古宝2倍率 × ... × 古宝N倍率

例：2个UR攻击古宝，都是58级
总倍率 = 229,349 × 229,349 ≈ 5.26×10^10
```

### 羁绊加成
```
最终攻击倍率 = 古宝攻击倍率 × 羁绊攻击倍率
```

### 装备等级（加算）
```
装备等级加成 = 古宝A加成 + 古宝B加成 + 羁绊加成

例：
- UR装备古宝 +3级
- SSR装备古宝 +2级
- 神匠羁绊 Lv2 +12级
总加成 = 3 + 2 + 12 = +17级
```

### 指数加成
```
最终指数 = 原指数 × (1 + 指数加成百分比)

例：
- 原攻击力 = 1e100
- 超脱者Lv2 = +2.5%
- 最终攻击力 = 1e102.5 ≈ 3.16e100
```

---

## 八、设计思路

### 1. 简洁直接
- 去掉Log转换，直接乘算
- 属性只有9种，清晰明了
- 羁绊自动绑定同属性古宝

### 2. 金字塔分布
- R品质占52%，是收集主力
- UR仅占8%，稀有且强大
- 符合收集心理，由易到难

### 3. 多流派build
- **战斗流**：攻击+生命+全属性
- **资源流**：爬塔+刷丹+精华
- **装备流**：装备等级+神器等级
- **指数流**：极稀有的指数加成

### 4. 长期追求
- 每界域25个，收集完有成就感
- 无限升重，后期仍有成长
- 羁绊组合，策略搭配

---

## 九、文件结构

```
js/
├── config.js                    # 古宝配置（ANCIENT_TREASURE_*）
├── classes/
│   └── AncientTreasure.js       # 古宝类（重构版）
└── game/
    └── Game.js                  # 更新UI方法（updateTreasureUI）

index.html                       # 古宝UI面板
docs/
└── 古宝系统设计文档.md           # 本文档
```

---

## 十、后续扩展建议

1. **古宝觉醒**：满10重后可觉醒，改变外观+大幅提升
2. **古宝共鸣**：同界域古宝全部激活有额外加成
3. **跨界域羁绊**：需要不同界域的古宝组合
4. **限时UP池**：特定古宝概率提升
5. **古宝交易**：玩家间碎片交换

---

**文档版本**：v1.0
**更新日期**：2026-02-16
